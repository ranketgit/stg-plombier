---
import { Icon } from 'astro-icon/components';

const faqData = [
  {
    question: "Quels sont vos délais d'intervention en cas d'urgence?",
    answer: "En cas d'urgence plomberie comme une fuite importante ou un WC bouché, notre équipe s'engage à intervenir dans l'heure suivant votre appel, dans la plupart des grandes villes belges. Pour les zones plus éloignées, le délai peut être de 1 à 2 heures selon la distance et la disponibilité de nos plombiers. Notre service d'urgence fonctionne 24h/24 et 7j/7, y compris les week-ends et jours fériés.",
  },
  {
    question: "Comment se déroule une intervention de débouchage de canalisation?",
    answer: "Lors d'une intervention de débouchage, notre plombier commence par identifier la cause exacte de l'obstruction. Il utilise ensuite l'équipement adapté à votre situation: furet manuel ou électrique pour les bouchons accessibles, pompe à haute pression pour les obstructions plus tenaces, ou caméra d'inspection pour localiser les problèmes dans les canalisations enterrées. Notre objectif est toujours de déboucher vos canalisations de manière définitive, sans endommager vos installations.",
  },
  {
    question: "Proposez-vous des devis gratuits avant intervention?",
    answer: "Absolument! Nous proposons des devis gratuits et sans engagement pour tous nos services de plomberie planifiés (installations, rénovations). Pour les interventions d'urgence, nos plombiers vous communiquent une estimation du coût avant de commencer les travaux, avec des tarifs transparents incluant déplacement, main d'œuvre et pièces nécessaires.",
  },
  {
    question: "Quelles garanties offrez-vous sur vos services?",
    answer: "Tous nos travaux de plomberie sont garantis: 1 an pour les réparations et débouchages, et jusqu'à 5 ans pour les nouvelles installations. Cette garantie couvre à la fois la main d'œuvre et les pièces installées. De plus, notre entreprise est entièrement assurée pour couvrir tout dommage éventuel durant nos interventions.",
  },
  {
    question: "À quelle fréquence faut-il faire l'entretien d'une chaudière?",
    answer: "En Belgique, l'entretien de votre chaudière est obligatoire: une fois par an pour les chaudières au mazout et tous les deux ans pour les chaudières au gaz. Cet entretien régulier est non seulement une obligation légale mais aussi une nécessité pour optimiser le rendement de votre installation, réduire votre consommation d'énergie et prolonger la durée de vie de votre chaudière.",
  },
  {
    question: "Que faire en cas de fuite d'eau avant l'arrivée du plombier?",
    answer: "En attendant l'arrivée de notre plombier, fermez d'abord le robinet d'arrivée d'eau principal pour limiter les dégâts. Pour une fuite sur un appareil spécifique, fermez sa vanne d'alimentation dédiée. Épongez l'eau déjà répandue et placez un récipient sous la fuite. Prenez des photos des dégâts pour votre assurance. Notre service d'urgence vous guidera par téléphone en attendant l'intervention de notre plombier.",
  },
];
---

<section class="py-12 bg-gray-50">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-blue-800 mb-8 text-center">Questions fréquentes sur Nos services de plomberie</h2>
    <ul class="space-y-4 lg:mx-48">
      {faqData.map((item, index) => (
        <li class="bg-white rounded-2xl shadow-md overflow-hidden">
          <button
            type="button"
            class="flex items-center justify-between w-full p-4 text-left text-blue-600 font-semibold transition-colors duration-300 hover:bg-blue-50 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-50"
            aria-expanded="false"
            data-faq-index={index}
          >
            <h3>{item.question}</h3>
            <Icon name="mdi:chevron-down" class="h-5 w-5 text-blue-400 transition-transform duration-300" id={`icon-${index}`} />
          </button>
          <p class="p-4 bg-gray-100 text-gray-700 text-sm hidden" id={`answer-${index}`}>
            {item.answer}
          </p>
        </li>
      ))}
    </ul>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const faqItems = document.querySelectorAll('[data-faq-index]');

    faqItems.forEach((item) => {
      item.addEventListener('click', () => {
        const index = item.getAttribute('data-faq-index');
        const answerElement = document.getElementById(`answer-${index}`);
        const iconElement = document.getElementById(`icon-${index}`);
        const isExpanded = item.getAttribute('aria-expanded') === 'true' || false;

        item.setAttribute('aria-expanded', !isExpanded);
        answerElement.classList.toggle('hidden');
        iconElement.classList.toggle('rotate-180');
      });
    });
  });
</script>