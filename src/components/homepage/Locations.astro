---
// src/components/Locations.astro
import { Icon } from 'astro-icon/components';

// Data structure for regions (to be displayed as cards)
const regions = [
    {
        name: "Province d'Anvers", // Kept original name, maps to 'antwerpen' slug
        slug: "/plombier-province-antwerpen/",
        description: "De la métropole anversoise aux communes environnantes, nos plombiers sont disponibles 24h/24 pour répondre à vos urgences."
    },
    {
        name: "Région de Bruxelles-Capitale",
        slug: "/plombier-region-bruxelles-capitale/",
        description: "Notre service de plomberie à Bruxelles vous garantit une intervention rapide 24h/24. Nos plombiers bruxellois connaissent parfaitement les spécificités des installations dans les maisons de maître comme dans les appartements modernes de la capitale."
    },
    {
        name: "Province du Hainaut",
        slug: "/plombier-province-hainaut/",
        description: "De Charleroi à Mons, nos plombiers hainuyers sont à votre disposition pour toute intervention d'urgence ou travaux planifiés."
    },
    {
        name: "Province du Brabant Wallon",
        slug: "/plombier-province-brabant-wallon/",
        description: "De Wavre à Nivelles, en passant par Ottignies-Louvain-la-Neuve, nos plombiers interviennent dans tout le Brabant Wallon pour des services de débouchage, plomberie et chauffage de qualité."
    },
    {
        name: "Province de Liège",
        slug: "/plombier-province-liege/",
        description: "De la ville de Liège aux communes avoisinantes, notre service de plomberie liégeois vous assure un dépannage rapide et efficace pour tous vos problèmes de plomberie."
    },
    {
        name: "Province de Limbourg", // Added Limbourg
        slug: "/plombier-province-limburg/",
        description: "Nos plombiers interviennent rapidement dans toute la province de Limbourg pour vos besoins en plomberie et chauffage." // Added a generic description
    },
    {
        name: "Province du Luxembourg",
        slug: "/plombier-province-luxembourg/",
        description: "Malgré la vaste étendue de la province, nos plombiers luxembourgeois vous garantissent une intervention rapide même dans les zones les plus reculées."
    },
    {
        name: "Province de Namur",
        slug: "/plombier-province-namur/",
        description: "Notre équipe de plombiers couvre l'ensemble de la province de Namur pour vous offrir des services de plomberie de qualité."
    },
    {
        name: "Flandre Orientale",
        slug: "/plombier-province-oost-vlaanderen/",
        description: "De Gand à Alost, nos plombiers sont à votre service pour toute intervention de plomberie en Flandre Orientale."
    },
    {
        name: "Province du Brabant Flamand",
        slug: "/plombier-province-vlaams-brabant/",
        description: "Nos équipes de plombiers couvrent l'ensemble du Brabant Flamand, de Louvain à Vilvorde, pour tous vos besoins en plomberie et chauffage."
    },
    {
        name: "Flandre Occidentale",
        slug: "/plombier-province-west-vlaanderen/",
        description: "Notre service de plomberie couvre toute la Flandre Occidentale, de Bruges à Ostende, pour tous vos besoins en plomberie."
    }
];

// Data structure for cities (to be displayed as individual dropdowns)
const cities = [
  {
    name: "Bruxelles et environs",
    description: "Notre équipe de plombiers bruxellois est disponible 24h/24 pour toute urgence de plomberie dans les 19 communes de Bruxelles-Capitale. Spécialistes du débouchage et de la réparation de fuites, nos plombiers connaissent parfaitement les spécificités des immeubles bruxellois, qu'il s'agisse d'anciennes maisons de maître ou d'appartements modernes."
  },
  {
    name: "Anvers (Antwerpen)",
    description: "Nos plombiers anversois interviennent rapidement pour tous vos problèmes de plomberie à Anvers et dans les communes avoisinantes. Experts en débouchage canalisation et réparation de chauffage, ils vous garantissent un service de qualité 7j/7."
  },
  {
    name: "Gand (Gent)",
    description: "À Gand et ses environs, notre équipe de plombiers professionnels vous propose des services complets de plomberie, du simple dépannage aux installations sanitaires complètes."
  },
  {
    name: "Charleroi",
    description: "Notre service de plomberie à Charleroi répond à toutes les urgences de plomberie dans la ville et ses alentours. Débouchage WC, réparation fuite, installation chauffage... nos plombiers carolorégiens sont à votre service."
  },
  {
    name: "Liège",
    description: "Notre équipe de plombiers liégeois intervient rapidement pour tous vos besoins en plomberie à Liège et dans toute la province. Spécialistes du débouchage et du chauffage, ils vous garantissent un service professionnel de qualité."
  },
  {
    name: "Bruges (Brugge)",
    description: "À Bruges et dans ses environs, nos plombiers vous proposent des interventions rapides pour tout problème de plomberie ou de chauffage."
  },
  {
    name: "Namur",
    description: "Nos plombiers namurois sont disponibles pour des interventions d'urgence et des travaux planifiés dans toute la région de Namur."
  },
  {
    name: "Louvain (Leuven)",
    description: "À Louvain et dans le Brabant Flamand, notre équipe de plombiers vous garantit un service professionnel pour toutes vos installations et réparations de plomberie."
  },
  {
    name: "Mons",
    description: "Notre service de plomberie à Mons répond à toutes vos urgences et besoins en plomberie dans la région montoise."
  }
];

// Other cities
const otherCities = [
  "Hasselt",
  "Tournai",
  "Ostende (Oostende)",
  "Malines (Mechelen)",
  "Alost (Aalst)",
  "Courtrai (Kortrijk)",
  "Verviers",
  "Mouscron",
  "Genk",
  "Saint-Nicolas (Sint-Niklaas)",
  "Et toutes les communes belges"
];
---

<section id="locations" class="py-16 md:py-24 bg-white">
  <div class="container mx-auto px-4">
    <!-- Provinces Section -->
    <div class="mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-center text-blue-800 mb-4">
        Plombier à votre service dans toutes les provinces de Belgique
      </h2>
      <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">
        Notre équipe de plombiers professionnels intervient rapidement dans toutes les provinces belges. Que vous habitiez en Flandre, en Wallonie ou dans la région de Bruxelles-Capitale, un plombier qualifié peut être à votre domicile en moins d'une heure en cas d'urgence.
      </p>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 my-24">
        {regions.map((region, index) => (
          <div key={index} class={`bg-white border border-gray-200 rounded-4xl shadow-md overflow-hidden hover:shadow-lg transition-shadow cursor-pointer ${regions.length % 3 === 1 && index === regions.length - 1 ? 'lg:col-span-3 lg:justify-center' : ''}`}>
            <div class="p-5">
              <h3 class="text-xl font-semibold text-blue-800 mb-3 flex items-center">
                {region.icon && <Icon name={region.icon} class="h-5 w-5 mr-2" />}
                {region.name}
              </h3>
              <p class="text-gray-600 text-sm">{region.description}</p>
              <a href={region.slug} class="mt-4 text-blue-600 text-sm font-medium flex items-center hover:text-blue-800">
                Nos services dans toute la {region.name}
                <Icon name="mdi:arrow-right" class="h-4 w-4 ml-1" />
              </a>
            </div>
          </div>
        ))}
      </div>

    <!-- Cities Section with Independent Dropdowns -->
    <div class="mb-16 flex flex-col justify-center items-center">
      <h2 class="text-3xl font-bold text-center text-blue-800 mb-6">
        Plombier Professionnel dans les Principales Villes Belges
      </h2>
      <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-10">
        Notre service de plomberie est disponible dans toutes les grandes villes de Belgique ainsi que dans leurs communes périphériques. Quel que soit votre lieu de résidence, nos plombiers locaux peuvent intervenir rapidement à votre domicile.
      </p>

      <div class="grid grid-cols-1 gap-4 mb-8 md:min-w-xl max-w-xl" id="city-container">
        {cities.map((city, index) => (
          <details class="bg-white border border-gray-200 rounded-3xl overflow-hidden city-dropdown" id={`city-${index}`}>
            <summary class="flex items-center justify-between p-4 cursor-pointer bg-gray-50 hover:bg-blue-50 transition-colors">
              <span class="font-medium text-blue-800">{city.name}</span>
              <Icon name="mdi:chevron-down" class="h-5 w-5 text-blue-600 transform transition-transform" />
            </summary>
            <div class="p-4 border-t border-gray-200">
              <p class="text-gray-600">{city.description}</p>
            
            </div>
          </details>
        ))}
      </div>

      <!-- Other cities dropdown -->
      <details class="bg-white border border-gray-200 rounded-3xl overflow-hidden mx-auto max-w-2xl">
        <summary class="flex items-center justify-between p-4 cursor-pointer bg-gray-50 hover:bg-blue-50 transition-colors">
          <span class="font-medium text-blue-800">Autres villes desservies</span>
          <Icon name="mdi:chevron-down" class="h-5 w-5 text-blue-600 transform transition-transform" />
        </summary>
        <div class="p-4 border-t border-gray-200">
          <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
            {otherCities.map((city) => (
              <div class="flex items-center">
                <span class="text-gray-700 text-sm">{city}</span>
              </div>
            ))}
          </div>
        </div>
      </details>
    </div>
  </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
      const cityDropdowns = document.querySelectorAll('.city-dropdown');
      
      cityDropdowns.forEach(dropdown => {
        dropdown.addEventListener('click', function(e) {
          // Prevent the default behavior
          e.stopPropagation();
          
          // Close all other dropdowns
          cityDropdowns.forEach(item => {
            if (item !== dropdown && item.hasAttribute('open')) {
              item.removeAttribute('open');
            }
          });
        });
      });
    });
  </script>

<style>
    /* Ensure consistent height for closed dropdowns */
    .city-dropdown summary {
      min-height: 3.5rem;
    }
    
    /* Prevent content shifting by using a fixed layout approach */
    .city-dropdown {
      height: auto;
      position: relative;
    }
    
    /* Transform the dropdown icon when open */
    .city-dropdown[open] summary .transform {
      transform: rotate(180deg);
    }
  </style>